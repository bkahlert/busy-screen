<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet"/>
    <link href="https://unpkg.com/nes.css@2.3.0/css/nes.min.css" rel="stylesheet"/>
    <link href="dialog-polyfill.css" rel="stylesheet"/>
    <title>Loading...</title>
    <!--suppress CssUnusedSymbol -->
    <style>
        html, body, #root {
            height: 100%;
        }

        .online .loading {
            opacity: 0;
        }

        body:not(.online) #root {
            opacity: .2;
        }

        .loading {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            padding-top: 2.3rem;
            opacity: 1.0;
            transition-property: opacity;
            transition-duration: 1.5s;

            display: flex;
            flex-wrap: nowrap;
            flex-direction: column;
            align-items: center;
            align-content: center;
            justify-content: flex-start;
        }

        .loading > * {
            margin-top: 3rem;
        }

        .loading__banner {
            position: relative;

            display: flex;
            flex-wrap: wrap;
            flex-direction: row;
            justify-content: space-evenly;
            align-items: center;
            align-content: center;
        }

        .loading__banner > * {
            margin-left: 1rem;
        }

        .loading__banner > .heart.is-half {
            position: absolute;
            top: 0;
            left: 0;
        }

        body:not(.online) .loading__banner > .heart.is-half {
            animation: heartbeat 1.5s ease-in-out infinite both;
        }

        .loading__log {
            display: none;
        }

        body:not(.online) .loading__log {
            display: block;
        }

        @keyframes heartbeat {
            from {
                opacity: 1;
            }
            49.999% {
                opacity: 1;
            }
            50% {
                opacity: 0;
            }
            to {
                opacity: 0;
            }
        }


        #root {
            background-color: slategray;
            display: flex;
            flex-wrap: wrap;
            flex-direction: row;
            justify-content: space-evenly;
            align-items: center;
            align-content: center;
            opacity: 1;
            transition-property: opacity;
            transition-duration: 1.5s;
        }

        .status {
            position: relative;
            min-width: 480px;
            min-height: 320px;
            width: 100%;
            height: 100%;
            background-color: white;
            border-width: 2.3rem;

            display: flex;
            flex-wrap: nowrap;
            flex-direction: column;
            align-items: stretch;
            align-content: center;
            justify-content: center;
        }

        .status__task {
            position: absolute;
            top: -2.3rem;
            left: 0;
            right: 0;
            font-size: 1.4rem;
        }

        .status__task > span {
            display: inline-block;
            padding: 4px 1rem 0 1rem;
            border-top: 0;
            background-color: white;
        }

        .status__status {
            margin-top: 2rem;

            display: flex;
            flex-wrap: nowrap;
            flex-direction: row;
            align-items: flex-end;
            align-content: center;
            justify-content: center;
        }

        .status__name {
            margin-bottom: 3.2rem;
            margin-right: 1rem;
            font-size: 2rem;
        }

        .status__avatar {
            -webkit-mask: url(data:image/gif;base64,R0lGODlhQABAAIAAAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAABACwAAAAAQABAAAACaIxvoMvtD+NCtAaJs1a23w2GnFeJpkYm5xp27Ita8By59M0g+M73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Pr3RWW9VOxU9Tnyaf7venEij41FEAADs=);
            -webkit-mask-size: 100%;
            image-rendering: pixelated;
        }

        .status__passed {
            margin-top: 1rem;
        }

        .status__remaining {
            margin-top: 1rem;
            font-size: 2rem;
        }

        .help {
            position: absolute;
            bottom: .55rem;
            left: .55rem;
            text-align: left;
            font-size: 0.8rem;
        }

        .dialog-menu {
            text-align: right;
        }

        dialog {
            position: fixed;
            top: 50%;
            transform: translate(0, -50%);
        }

        dialog::backdrop { /* native */
            background-color: rgba(0, 0, 0, 0.3);
        }

        dialog + .backdrop { /* polyfill */
            background-color: rgba(0, 0, 0, 0.3);
        }

        .author {
            position: absolute;
            bottom: .55rem;
            right: .55rem;
            text-align: right;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
<div id="root"></div>
<div class="loading">
    <div class="loading__banner">
        <i class="nes-icon is-large is-half heart"></i>
        <i class="nes-icon is-large is-transparent heart"></i>
        <i class="nes-icon is-large is-transparent heart"></i>
        <i class="nes-icon is-large is-transparent heart"></i>
        <span>Loading...</span>
    </div>
    <div class="loading__log"></div>
</div>
<div class="help">
    <a href="#" onclick="document.getElementById('help-dialog').showModal(); return false;">
        <i class="nes-icon coin is-small"></i> Help
    </a>
    <dialog class="nes-dialog is-rounded" id="help-dialog">
        <form method="dialog">
            <h1 class="title">Update Status</h1>
            <pre>
                <code>
curl -X PUT --location "http://192.168.168.168:1880/status" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d "{
           \"name\": \"working\",
           \"task\": \"TICKET-123\",
           \"duration\": \"PT50M\",
           \"email\": \"john.doe@example.com\"
         }"
                </code>
            </pre>
            <p><em>All fields but <code>name</code> are optional.</em></p>
            <menu class="dialog-menu">
                <button class="nes-btn is-primary">Close</button>
            </menu>
        </form>
    </dialog>
</div>
<div class="author">
    <a href="https://github.com/bkahlert/busy-screen">
        <i class="nes-icon github is-small"></i> <span class="is-dark">bkahlert/busy-screen</span>
    </a>
</div>
<script src="busy-screen.js"></script>
<script src="dialog-polyfill.js"></script>
<script>
  const dialog = document.querySelector('dialog')
  dialogPolyfill.registerDialog(dialog)
</script>
</body>
</html>
